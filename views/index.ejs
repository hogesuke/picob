<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <script type="text/javascript" src="/javascripts/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/knockout-3.0.0.js"></script>
    <script type="text/javascript" src="/javascripts/knockout.mapping-latest.js"></script>
    <script type="text/javascript" src="/javascripts/picob.js"></script>
    <link rel='stylesheet' href='/stylesheets/cssreset-min.css' />
    <link rel='stylesheet' href='/stylesheets/picob.css' />
  </head>
  <body>
    <div id="pieces">
      <% var pieceNo = 1; %>
      <div class="week" week="1">
      <% /* 6週間分 */ %>
      <% for(var i = 0; i < 6; i++) { %>
        <div class="week" week="<%= i + 1 %>">
          <% /* 1週間(7日) */ %>
          <% for(var j = 0; j < 7; j++) { %>
            <!-- ko if: pieces()[<%= pieceNo %>] -->
            <div data-bind="template: {name: 'piece-template', data: {piece: pieces()[<%= pieceNo %>]}},
              css: pieces()[<%= pieceNo %>].pieceCss()">
            </div>
            <!-- /ko -->
            <% pieceNo++; %>
          <% } %>
        </div>
      <% } %>

      <script type="text/html" id="piece-template">
        <!-- ko if: piece -->
        <div data-bind="text: piece.date" class="date"></div>
        <div data-bind="text: piece.feeling" class="feeling web-icon-fontello"></div>
        <!-- /ko -->
      </script>

      <!-- テストデータ作成用 -->
      <div class="piece" year="2013" month="1" day="1">
        <div class="date">
          2013/01/01
        </div>
        <div class="feeling web-icon-fontello">
          1
        </div>
        <div class="feeling-selector">
          <div class="feeling-choices feeling-good web-icon-fontello">
            1
          </div>
          <div class="feeling-choices feeling-normal web-icon-fontello">
            3
          </div>
          <div class="feeling-choices feeling-bad web-icon-fontello">
            2
          </div>
        </div>
      </div>
      <div class="piece" year="2013" month="1" day="2">
        <div class="date">
          2013/01/02
        </div>
        <div class="feeling web-icon-fontello">
          2
        </div>
        <div class="feeling-selector">
          <div class="feeling-choices feeling-good web-icon-fontello">
            1
          </div>
          <div class="feeling-choices feeling-normal web-icon-fontello">
            3
          </div>
          <div class="feeling-choices feeling-bad web-icon-fontello">
            2
          </div>
        </div>
      </div>
      <div class="piece" year="2013" month="1" day="3">
        <div class="date">
          2013/01/03
        </div>
        <div class="feeling web-icon-fontello">
          3
        </div>
        <div class="feeling-selector">
          <div class="feeling-choices feeling-good web-icon-fontello">
            1
          </div>
          <div class="feeling-choices feeling-normal web-icon-fontello">
            3
          </div>
          <div class="feeling-choices feeling-bad web-icon-fontello">
            2
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
