<!DOCTYPE html>
<html>
  <head>
    <title>picob</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" >
    <script type="text/javascript" src="/javascripts/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/knockout-3.0.0.js"></script>
    <script type="text/javascript" src="/javascripts/knockout.mapping-latest.js"></script>
    <script type="text/javascript" src="/javascripts/jquery.simplemodal.js"></script>
    <script type="text/javascript" src="/javascripts/matchMedia.js"></script>
    <script type="text/javascript" src="/javascripts/picob.js"></script>
    <link rel='stylesheet' href='/stylesheets/cssreset-min.css' />
    <link rel='stylesheet' href='/stylesheets/picob.common.css' />
    <link rel='stylesheet' href='/stylesheets/picob.css' />
    <link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Quicksand' type='text/css'>
  </head>
  <body>
    <div id="header">
      <div id="global-navi">
        <div id="navi-left">
          <div id="logo">picob</div>
        </div>
        <div id="navi-center">
          <div id="controler">
            <div id="controler-inner">
              <div id="month-controler">
                <% if (prevDate.isVisible) { %>
                <a id="prev-month" class="web-icon-fontello"
                  href="/<%= userSeq %>/calendar/<%= prevDate.year %>/<%= prevDate.month %>">4</a>
                <% } else { %>
                <span id="prev-month" class="web-icon-fontello">4</span>
                <% } %>
                <div id="current-ym" year="<%= thisDate.year %>" month="<%= thisDate.month %>">
                  <%= thisDate.year + "/" + thisDate.month %>
                </div>
                <% if (nextDate.isVisible) { %>
                <a id="next-month" class="web-icon-fontello"
                  href="/<%= userSeq %>/calendar/<%= nextDate.year %>/<%= nextDate.month %>">5</a>
                <% } else { %>
                <span id="next-month" class="web-icon-fontello">5</span>
                <% } %>
              </div>
            </div>
          </div>
        </div>
        <div id="navi-right">
          <div href="/logout" id="logout-button" class="link">ログアウト</div>
          <div href="/<%= userSeq %>/entry/today" id="today-button" class="link"><%= toDay.date %></div>
        </div>
      </div>
    </div>
    <div id="container">
      <div id="calendar">
        <div id="day">
          <div class="sun">Sun</div>
          <div>Mon</div>
          <div>Tue</div>
          <div>Wed</div>
          <div>Thu</div>
          <div>Fri</div>
          <div class="sat">Sat</div>
        </div>
        <div id="pieces">
          <% var pieceNo = 0; %>
          <div class="week" week="1">
          <% /* 6週間分 */ %>
          <% for(var i = 0; i < 6; i++) { %>
            <div class="week" week="<%= i + 1 %>">
              <% /* 1週間(7日) */ %>
              <% for(var j = 0; j < 7; j++) { %>
                <!-- ko if: pieces()[<%= pieceNo %>] -->
                <div data-bind="template: {name: 'piece-template', data: {piece: pieces()[<%= pieceNo %>]}},
                  attr: {'href': pieces()[<%= pieceNo %>].getHref()},
                  css: pieces()[<%= pieceNo %>].getPieceCss()">
                </div>
                <!-- /ko -->
                <% pieceNo++; %>
              <% } %>
            </div>
          <% } %>

          <script type="text/html" id="piece-template">
            <!-- ko if: !piece.isDummy() -->
              <div data-bind="text: piece.date, attr: {'year': piece.year, 'month': piece.month, 'day': piece.day}" class="date"></div>
              <div data-bind="css: piece.feeling" class="feeling"></div>
              <div class="feeling-text">
                <!-- ko if: piece.existFeelingText() -->
                  <span data-bind="text: piece.feeling_text"></span>
                <!-- /ko -->
              </div>
            <!-- /ko -->
          </script>
        </div>
      </div>
    </div>
  </body>
</html>
